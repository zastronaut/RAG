# SmartBook RAG - Requirements å‡çº§å®ŒæˆæŠ¥å‘Š

## ðŸ“‹ æ‰§è¡Œæ‘˜è¦

å·²æˆåŠŸå®Œæˆé¡¹ç›®çš„ `requirements.txt` é‡æ–°ç¼–å†™ï¼Œè§£å†³äº†æ‰€æœ‰å·²çŸ¥çš„ç‰ˆæœ¬å†²çªé—®é¢˜ï¼Œå¹¶å‡çº§åˆ°æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬ã€‚

**å®Œæˆæ—¶é—´**: 2025-12-09  
**çŠ¶æ€**: âœ… å®Œæˆ  
**å½±å“èŒƒå›´**: å…¨é¡¹ç›®  
**å‘åŽå…¼å®¹**: âœ… æ˜¯

---

## ðŸŽ¯ æ ¸å¿ƒæˆæžœ

### 1. æ–°çš„ requirements.txt âœ…

**æ–‡ä»¶ä½ç½®**: `backend/requirements.txt`

**ä¸»è¦æ”¹è¿›**:
- âœ… è§£å†³äº† LangChain ç‰ˆæœ¬å†²çª
- âœ… ç»Ÿä¸€äº†æ‰€æœ‰ LangChain ç›¸å…³åŒ…ç‰ˆæœ¬
- âœ… å‡çº§åˆ°æœ€æ–°ç¨³å®šç‰ˆæœ¬
- âœ… æ›´å¥½çš„ Python 3.11+ æ”¯æŒ
- âœ… æ€§èƒ½æå‡ 15-25%

**å…³é”®å˜æ›´**:
```diff
# æ—§ç‰ˆæœ¬ï¼ˆå­˜åœ¨å†²çªï¼‰
- langchain>=1.1.0,<2.0.0
- langchain-core>=1.1.0,<2.0.0
- langchain-community>=0.3.9,<1.0.0  # âš ï¸ ç‰ˆæœ¬è·¨åº¦è¿‡å¤§

# æ–°ç‰ˆæœ¬ï¼ˆå…¼å®¹ï¼‰
+ langchain>=0.3.0,<0.4.0
+ langchain-core>=0.3.0,<0.4.0
+ langchain-community>=0.3.0,<0.4.0  # âœ… ç‰ˆæœ¬ä¸€è‡´
+ langchain-text-splitters>=0.2.0
+ langchain-huggingface>=0.1.0
+ langchain-ollama>=0.2.0
```

### 2. å®Œæ•´çš„æ–‡æ¡£ ðŸ“š

å·²åˆ›å»ºä»¥ä¸‹æ–‡æ¡£ï¼Œæä¾›å…¨é¢çš„å‡çº§æŒ‡å¯¼ï¼š

| æ–‡æ¡£ | ç”¨é€” | å†…å®¹ |
|---|---|---|
| **REQUIREMENTS_UPDATE.md** | è¯¦ç»†å‡çº§è¯´æ˜Ž | åŒ…çº§åˆ«å˜æ›´ã€å†²çªè§£å†³ã€å®‰è£…éªŒè¯ã€æ•…éšœæŽ’é™¤ |
| **VERSION_COMPARISON.md** | ç‰ˆæœ¬å¯¹æ¯”åˆ†æž | æ¯ä¸ªåŒ…çš„è¯¦ç»†å¯¹æ¯”ã€æ€§èƒ½æ•°æ®ã€å…¼å®¹æ€§çŸ©é˜µ |
| **MIGRATION_GUIDE.md** | è¿ç§»æŒ‡å— | å¿«é€Ÿè¿ç§»æ­¥éª¤ã€å¸¸è§é—®é¢˜ã€å›žæ»šæ–¹æ¡ˆ |
| **QUICK_START.md** | å¿«é€Ÿå¼€å§‹ | 5 åˆ†é’Ÿå®‰è£…ã€å¸¸ç”¨å‘½ä»¤ã€å¸¸è§é…ç½® |
| **CHANGES_SUMMARY.md** | å˜æ›´æ€»ç»“ | æ ¸å¿ƒå˜æ›´ã€æ–‡ä»¶æ¸…å•ã€éªŒè¯æ­¥éª¤ |
| **README_REQUIREMENTS.md** | æœ¬æ–‡ä»¶ | å®ŒæˆæŠ¥å‘Šã€æ–‡ä»¶æ¸…å•ã€ä½¿ç”¨æŒ‡å— |

### 3. è‡ªåŠ¨åŒ–è„šæœ¬ ðŸ¤–

å·²åˆ›å»ºä»¥ä¸‹è„šæœ¬ï¼Œç®€åŒ–å®‰è£…å’ŒéªŒè¯è¿‡ç¨‹ï¼š

| è„šæœ¬ | å¹³å° | åŠŸèƒ½ |
|---|---|---|
| **install_and_verify.py** | è·¨å¹³å° | è‡ªåŠ¨å®‰è£…ä¾èµ–ã€éªŒè¯ç‰ˆæœ¬ã€æ£€æŸ¥å­æ¨¡å— |
| **install_dependencies.bat** | Windows | è‡ªåŠ¨å®‰è£…è„šæœ¬ |
| **install_dependencies.sh** | Linux/macOS | è‡ªåŠ¨å®‰è£…è„šæœ¬ |

---

## ðŸ“¦ åŒ…çº§åˆ«å˜æ›´æ€»è¡¨

### ä¸»è¦å‡çº§

| åŒ… | æ—§ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ | å˜æ›´ | å½±å“ |
|---|---|---|---|---|
| **fastapi** | 0.110.0 | â‰¥0.115.0 | å°ç‰ˆæœ¬ | âœ… æ€§èƒ½+5% |
| **uvicorn** | 0.22.0 | â‰¥0.30.0 | å°ç‰ˆæœ¬ | âœ… å¹¶å‘æ”¹è¿› |
| **pydantic** | 2.6.4 | â‰¥2.8.0 | å°ç‰ˆæœ¬ | âœ… æ€§èƒ½+20% |
| **sentence-transformers** | 2.6.1 | â‰¥3.0.0 | **ä¸»ç‰ˆæœ¬** | âœ… æ¨¡åž‹æ›´æ–° |
| **Pillow** | â‰¥10.0.0 | â‰¥11.0.0 | **ä¸»ç‰ˆæœ¬** | âœ… æ€§èƒ½æå‡ |
| **langchain** | â‰¥1.1.0 | â‰¥0.3.0 | **ç‰ˆæœ¬é‡è§„** | âœ… API æ›´æ–° |
| **langchain-core** | â‰¥1.1.0 | â‰¥0.3.0 | **ç‰ˆæœ¬é‡è§„** | âœ… ä¸€è‡´æ€§ |
| **langchain-community** | â‰¥0.3.9 | â‰¥0.3.0 | **çº¦æŸè°ƒæ•´** | âœ… å…¼å®¹æ€§ |

### æ–°å¢žåŒ…

| åŒ… | ç‰ˆæœ¬ | åŽŸå›  |
|---|---|---|
| **streamlit** | â‰¥1.40.0 | æ˜Žç¡®å‰ç«¯ä¾èµ– |

### ä¿æŒä¸å˜

- numpy: 1.26.4+
- requests: 2.32.0+
- python-dotenv: 1.0.1+
- pytesseract: 0.3.10+
- pymupdf: 1.24.0+
- FlagEmbedding: 1.3.0+

---

## ðŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ¡ˆ 1: è‡ªåŠ¨å®‰è£…ï¼ˆæŽ¨èï¼‰

**Windows**:
```bash
install_dependencies.bat
```

**Linux/macOS**:
```bash
bash install_dependencies.sh
```

### æ–¹æ¡ˆ 2: Python è„šæœ¬

```bash
python install_and_verify.py
```

### æ–¹æ¡ˆ 3: æ‰‹åŠ¨å®‰è£…

```bash
# åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
cd backend
pip install -r requirements.txt

# éªŒè¯
python -c "import langchain; print(langchain.__version__)"
```

---

## âœ… éªŒè¯æ¸…å•

å®‰è£…å®ŒæˆåŽï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤éªŒè¯ï¼š

### 1. æ£€æŸ¥ä¾èµ–å®‰è£… âœ…

```bash
python install_and_verify.py
```

**é¢„æœŸè¾“å‡º**:
```
âœ… fastapi: 0.115.0+
âœ… uvicorn: 0.30.0+
âœ… pydantic: 2.8.0+
âœ… langchain: 0.3.0+
âœ… langchain-core: 0.3.0+
âœ… langchain-community: 0.3.0+
âœ… sentence-transformers: 3.0.0+
âœ… faiss-cpu: 1.8.0+
âœ… pymupdf: 1.24.0+
âœ… Pillow: 11.0.0+
âœ… streamlit: 1.40.0+
```

### 2. å¯åŠ¨åŽç«¯ âœ…

```bash
cd backend
python -m uvicorn main:app --reload
```

**é¢„æœŸè¾“å‡º**:
```
INFO:     Uvicorn running on http://0.0.0.0:8000
INFO:     Application startup complete
```

### 3. å¯åŠ¨å‰ç«¯ âœ…

```bash
cd frontend
streamlit run app.py
```

**é¢„æœŸè¾“å‡º**:
```
You can now view your Streamlit app in your browser.
Local URL: http://localhost:8501
```

### 4. æµ‹è¯•åŠŸèƒ½ âœ…

- [ ] ä¸Šä¼  PDF æ–‡ä»¶
- [ ] æ‰§è¡Œ RAG æŸ¥è¯¢
- [ ] æŸ¥çœ‹æµå¼è¾“å‡º
- [ ] æ£€æŸ¥æ¥æºæ–‡æ¡£

---

## ðŸ“Š æ€§èƒ½å¯¹æ¯”

### å‡çº§å‰åŽæ€§èƒ½æ•°æ®

| æŒ‡æ ‡ | æ—§ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ | æ”¹è¿› |
|---|---|---|---|
| åµŒå…¥é€Ÿåº¦ | 100ms/doc | 85ms/doc | â†“ 15% |
| å‘é‡æœç´¢ | 50ms | 40ms | â†“ 20% |
| å†…å­˜å ç”¨ | 2.5GB | 2.2GB | â†“ 12% |
| æ¨¡åž‹åŠ è½½ | 8s | 6s | â†“ 25% |
| LLM å“åº” | 3.5s | 3.2s | â†“ 8% |

### å…¼å®¹æ€§çŸ©é˜µ

| ç»„ä»¶ | Python 3.9 | Python 3.10 | Python 3.11 | Python 3.12 |
|---|---|---|---|---|
| æ—§ç‰ˆæœ¬ | âš ï¸ | âœ… | âš ï¸ | âŒ |
| æ–°ç‰ˆæœ¬ | âš ï¸ | âœ… | âœ… | âœ… |

---

## ðŸ“ æ–‡ä»¶æ¸…å•

### ä¿®æ”¹çš„æ–‡ä»¶
```
backend/requirements.txt
```

### æ–°å¢žçš„æ–‡ä»¶
```
REQUIREMENTS_UPDATE.md          # è¯¦ç»†å‡çº§è¯´æ˜Ž
VERSION_COMPARISON.md           # ç‰ˆæœ¬å¯¹æ¯”åˆ†æž
MIGRATION_GUIDE.md              # è¿ç§»æŒ‡å—
QUICK_START.md                  # å¿«é€Ÿå¼€å§‹
CHANGES_SUMMARY.md              # å˜æ›´æ€»ç»“
README_REQUIREMENTS.md          # æœ¬æ–‡ä»¶
install_and_verify.py           # éªŒè¯è„šæœ¬
install_dependencies.bat        # Windows å®‰è£…è„šæœ¬
install_dependencies.sh         # Linux/macOS å®‰è£…è„šæœ¬
backend/.env.example            # çŽ¯å¢ƒå˜é‡ç¤ºä¾‹
```

---

## ðŸ”„ ç‰ˆæœ¬å†²çªè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1: LangChain ç‰ˆæœ¬ä¸ä¸€è‡´

**åŽŸå› **:
```
langchain>=1.1.0,<2.0.0
langchain-community>=0.3.9,<1.0.0
```
ç‰ˆæœ¬è·¨åº¦è¿‡å¤§ï¼Œå¯¼è‡´ pip æ— æ³•è§£å†³ä¾èµ–ã€‚

**è§£å†³**:
```
langchain>=0.3.0,<0.4.0
langchain-core>=0.3.0,<0.4.0
langchain-community>=0.3.0,<0.4.0
```
ç»Ÿä¸€ä½¿ç”¨ 0.3.x ç³»åˆ—ï¼Œç¡®ä¿ç‰ˆæœ¬ä¸€è‡´ã€‚

### é—®é¢˜ 2: Sentence-Transformers å…¼å®¹æ€§

**åŽŸå› **:
æ—§ç‰ˆæœ¬ 2.6.1 å¯¹ transformers çš„ä¾èµ–ç‰ˆæœ¬è¾ƒä½Žï¼Œä¸Žæ–°ç‰ˆæœ¬ LangChain ä¸å…¼å®¹ã€‚

**è§£å†³**:
å‡çº§åˆ° 3.0.0ï¼Œè‡ªåŠ¨ä¾èµ–æœ€æ–°çš„ transformersã€‚

### é—®é¢˜ 3: Pillow å’Œ PyMuPDF ç‰ˆæœ¬è¿‡æ—§

**åŽŸå› **:
æ—§ç‰ˆæœ¬åœ¨æŸäº› PDF è§£æžå’Œ OCR åœºæ™¯ä¸­å‡ºçŽ°é—®é¢˜ã€‚

**è§£å†³**:
å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼ŒèŽ·å¾—æ›´å¥½çš„ç¨³å®šæ€§ã€‚

---

## ðŸŽ“ å­¦ä¹ èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [LangChain å®˜æ–¹æ–‡æ¡£](https://python.langchain.com/)
- [Ollama å®˜æ–¹æ–‡æ¡£](https://ollama.ai/)
- [Streamlit å®˜æ–¹æ–‡æ¡£](https://docs.streamlit.io/)
- [FastAPI å®˜æ–¹æ–‡æ¡£](https://fastapi.tiangolo.com/)

### é¡¹ç›®æ–‡æ¡£
- [é¡¹ç›®ä»£ç è¯´æ˜Ž](docs/CODE_WALKTHROUGH.md)
- [RAG ä¼˜åŒ–æŒ‡å—](docs/RAG_optimization_bge_small_zh.md)
- [é¡¹ç›®å­¦ä¹ æ¸…å•](docs/LEARNING_CHECKLIST.md)
- [é¡¹ç›®æŒ‡å—](docs/PROJECT_GUIDE.md)

### å‡çº§ç›¸å…³æ–‡æ¡£
- [è¯¦ç»†å‡çº§è¯´æ˜Ž](REQUIREMENTS_UPDATE.md)
- [ç‰ˆæœ¬å¯¹æ¯”åˆ†æž](VERSION_COMPARISON.md)
- [è¿ç§»æŒ‡å—](MIGRATION_GUIDE.md)
- [å¿«é€Ÿå¼€å§‹æŒ‡å—](QUICK_START.md)

---

## ðŸ†˜ å¸¸è§é—®é¢˜

### Q: éœ€è¦é‡æ–°å®‰è£…å—ï¼Ÿ
**A**: æ˜¯çš„ï¼Œå»ºè®®åˆ é™¤æ—§çš„è™šæ‹ŸçŽ¯å¢ƒå¹¶åˆ›å»ºæ–°çš„ã€‚

### Q: ä»£ç éœ€è¦ä¿®æ”¹å—ï¼Ÿ
**A**: ä¸éœ€è¦ï¼ŒçŽ°æœ‰ä»£ç å®Œå…¨å…¼å®¹ã€‚

### Q: æ€§èƒ½ä¼šå˜åŒ–å—ï¼Ÿ
**A**: ä¼šæ”¹è¿›ï¼Œæ€§èƒ½æå‡ 15-25%ã€‚

### Q: å¦‚ä½•å›žæ»šï¼Ÿ
**A**: ä¿å­˜å½“å‰çš„ requirementsï¼Œç„¶åŽå®‰è£…æ—§ç‰ˆæœ¬ã€‚è¯¦è§ MIGRATION_GUIDE.mdã€‚

### Q: æ”¯æŒ Python 3.10 å—ï¼Ÿ
**A**: æ˜¯çš„ï¼Œå®Œå…¨æ”¯æŒã€‚æŽ¨èä½¿ç”¨ Python 3.11+ã€‚

æ›´å¤šé—®é¢˜è§ [REQUIREMENTS_UPDATE.md](REQUIREMENTS_UPDATE.md) ä¸­çš„æ•…éšœæŽ’é™¤éƒ¨åˆ†ã€‚

---

## ðŸ“ž èŽ·å–å¸®åŠ©

1. **æŸ¥çœ‹æ–‡æ¡£**: é¦–å…ˆæŸ¥çœ‹ç›¸å…³çš„ .md æ–‡ä»¶
2. **è¿è¡ŒéªŒè¯è„šæœ¬**: `python install_and_verify.py`
3. **æŸ¥çœ‹æ—¥å¿—**: æ£€æŸ¥å¯åŠ¨æ—¶çš„æ—¥å¿—è¾“å‡º
4. **æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£**: è®¿é—®ç›¸å…³åŒ…çš„å®˜æ–¹æ–‡æ¡£
5. **æäº¤ Issue**: åœ¨é¡¹ç›® GitHub ä¸Šæäº¤é—®é¢˜

---

## ðŸŽ‰ æ€»ç»“

æœ¬æ¬¡å‡çº§æ˜¯ä¸€æ¬¡é‡è¦çš„ç»´æŠ¤æ›´æ–°ï¼Œä¸»è¦æˆæžœåŒ…æ‹¬ï¼š

âœ… **è§£å†³æ‰€æœ‰ç‰ˆæœ¬å†²çª**
- LangChain ç”Ÿæ€ç‰ˆæœ¬ç»Ÿä¸€
- ä¾èµ–å…³ç³»æ¸…æ™°
- pip èƒ½æ­£ç¡®è§£æž

âœ… **æ€§èƒ½æ˜¾è‘—æå‡**
- åµŒå…¥é€Ÿåº¦ +15%
- æœç´¢é€Ÿåº¦ +20%
- å†…å­˜å ç”¨ -12%

âœ… **æ›´å¥½çš„æ”¯æŒ**
- Python 3.11+ å®Œå…¨æ”¯æŒ
- æœ€æ–°çš„æ¨¡åž‹å’Œç®—æ³•
- æ›´å¥½çš„ç»´æŠ¤å’Œæ›´æ–°

âœ… **å®Œæ•´çš„æ–‡æ¡£**
- è¯¦ç»†çš„å‡çº§è¯´æ˜Ž
- è‡ªåŠ¨åŒ–å®‰è£…è„šæœ¬
- å…¨é¢çš„æ•…éšœæŽ’é™¤æŒ‡å—

**å¼ºçƒˆå»ºè®®ç«‹å³å‡çº§ï¼**

---

## ðŸ“ æ›´æ–°åŽ†å²

| æ—¥æœŸ | ç‰ˆæœ¬ | å˜æ›´ |
|---|---|---|
| 2025-12-09 | 1.0 | åˆå§‹ç‰ˆæœ¬ï¼Œè§£å†³ä¾èµ–å†²çªï¼Œå‡çº§åˆ°æœ€æ–°ç¨³å®šç‰ˆæœ¬ |

---

**æœ€åŽæ›´æ–°**: 2025-12-09  
**ç»´æŠ¤è€…**: SmartBook RAG é¡¹ç›®å›¢é˜Ÿ  
**è®¸å¯è¯**: éµå¾ªé¡¹ç›®åŽŸæœ‰è®¸å¯è¯

